{"version":3,"file":"twitch.js","sources":["../../src/providers/twitch.ts"],"sourcesContent":["import { OAuth2Provider } from \"./oauth2\";\r\nconst defaultConfig = {\r\n    id: \"twitch\",\r\n    scope: \"user:read:email\",\r\n    accessTokenUrl: \"https://id.twitch.tv/oauth2/token\",\r\n    authorizationUrl: \"https://id.twitch.tv/oauth2/authorize\",\r\n    profileUrl: \"https://api.twitch.tv/helix/users\",\r\n};\r\nexport class TwitchOAuth2Provider extends OAuth2Provider {\r\n    constructor(config) {\r\n        super({\r\n            ...defaultConfig,\r\n            ...config,\r\n        });\r\n    }\r\n    async getUserProfile(tokens) {\r\n        const headers = {\r\n            \"Client-ID\": this.config.clientId + \"\",\r\n            Accept: \"application/vnd.twitchtv.v5+json\",\r\n            Authorization: `Bearer ${tokens.access_token}`,\r\n        };\r\n        const { data: [profile], } = await fetch(this.config.profileUrl, { headers: headers }).then((res) => res.json());\r\n        return profile;\r\n    }\r\n}\r\n"],"names":["OAuth2Provider"],"mappings":";;;;;;;;;;AACA,MAAM,gBAAgB;AAAA,EAClB,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,gBAAgB;AAAA,EAChB,kBAAkB;AAAA,EAClB,YAAY;AAAA;mCAE0BA,gCAAe;AAAA,EACrD,YAAY,QAAQ;AAChB,UAAM;AAAA,SACC;AAAA,SACA;AAAA;AAAA;AAAA,QAGL,eAAe,QAAQ;AACzB,UAAM,UAAU;AAAA,MACZ,aAAa,KAAK,OAAO,WAAW;AAAA,MACpC,QAAQ;AAAA,MACR,eAAe,UAAU,OAAO;AAAA;AAEpC,UAAM,EAAE,MAAM,CAAC,aAAc,MAAM,MAAM,KAAK,OAAO,YAAY,EAAE,WAAoB,KAAK,CAAC,QAAQ,IAAI;AACzG,WAAO;AAAA;AAAA;;;;"}